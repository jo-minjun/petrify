# Petrify v1.0 로드맵

## Phase 1: 모노레포 구조 전환 ✅
- [x] pnpm workspace 설정
- [x] @petrify/core 패키지 생성
- [x] @petrify/parser-viwoods 패키지 분리
- [x] 포트 인터페이스 정의 (ParserPort, OcrPort)

## Phase 2: OCR 기본 지원 ✅
- [x] OcrPort 상세 설계 (OcrOptions, confidence 필드)
- [x] @petrify/ocr-tesseract 구현 (Tesseract.js 래핑)
- [x] 손글씨 인식 → Excalidraw 텍스트 요소 변환 (## OCR Text 섹션)

## Phase 3: Obsidian 플러그인 ✅
- [x] 플러그인 기본 구조 (@petrify/obsidian-plugin)
- [x] 설정 UI (감시 폴더 경로, OCR provider 선택)
- [x] WatcherPort/ConversionStatePort 포트 인터페이스 정의
- [x] @petrify/watcher-chokidar 패키지 (WatcherPort 구현)
- [x] ConversionPipeline 오케스트레이터 (확장자 필터 → mtime 스킵 → 파싱 → OCR → 변환)
- [x] 자동 변환 파이프라인

## Phase 4: Google Vision OCR 지원 ✅
- [x] @petrify/ocr-google-vision 패키지 생성 (OcrPort 구현)
- [x] Google Cloud Vision API 연동 (TEXT_DETECTION / DOCUMENT_TEXT_DETECTION)
- [x] 플러그인 설정 UI에 Google Vision provider 옵션 추가
- [x] API 키 설정 및 인증 처리

## Phase 5: 드래그 & 드롭 ✅
- [x] Obsidian 플러그인에 드래그 & 드롭 지원 추가
- [x] 다중 파서 선택 모달
- [x] 변환 결과 알림

## Phase 6: 다중 페이지 OCR ✅
- [x] 이미지 기반 전환으로 해결 (페이지별 screenshotBmp → 개별 OCR)

## Phase 7: 삭제 동기화 ✅
- [x] 원본 파일 삭제 시 변환 파일도 삭제

## Phase 8: 추가 파서
- [ ] @petrify/parser-supernote
- [ ] @petrify/parser-remarkable

## Phase 9: 파일 크기 최적화
- [ ] 대용량 노트(다중 페이지) 성능 프로파일링
- [ ] 이미지 리사이즈 옵션 (예: 1440x1920 → 720x960)
- [ ] N페이지 초과 시 파일 분할 전략
- [ ] Obsidian Sync 5MB/파일 제한 대응

## Phase 10: 다중 출력 포맷 지원 ✅
- [x] FileGeneratorPort 인터페이스 정의 (출력 포맷 추상화)
- [x] @petrify/generator-excalidraw 패키지 생성 (ExcalidrawFileGenerator)
- [x] @petrify/generator-markdown 패키지 생성 (MarkdownFileGenerator)
- [x] 외부 이미지 에셋 지원 (assets/{noteName}/ 디렉터리)
- [x] ConversionPipeline FileGeneratorPort 연동
- [x] 플러그인 설정 UI에 출력 포맷 선택 옵션 추가
